{% extends "backend/base.html" %}

{% load static %}

{% block title %}
Testing
{% endblock title %}


{% block styles %}
<style>
    .blinking{
        animation:blinkingText 1.2s infinite;
    }
    @keyframes blinkingText{
        0%{     color: #fff;    }
        49%{    color: #fff; }
        60%{    color: transparent; }
        99%{    color:transparent;  }
        100%{   color: #fff;    }
    }
</style>
{% endblock styles %}


{% block scripts %}
<script>

    function copyToClipboard() {
        /* Get the text field */
        var copyText = document.getElementById("id_presenter_link");
        console.log(copyText)

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");
    } 


    function copyToClipboardViewer() {
        /* Get the text field */
        var copyText = document.getElementById("id_viewer_link");
        console.log(copyText)

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");
    }

    function copyToClipboardSecret() {
        /* Get the text field */
        var copyText = document.getElementById("id_secret_link");
        console.log(copyText)

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");
    }


    function ajaxUpdateTicketOption(object) {

        var token = '{{ csrf_token }}';

        $.ajax({

            type: "POST",
            headers: { "X-CSRFToken": token },
            url: '{{ request.path }}',

            data: {
                'value': object.checked
            },

            success: function (data) {
                console.log(data)

            }
        });

    }


    function ajaxRefreshSecret(object) {

        var token = '{{ csrf_token }}';

        $.ajax({

            type: "POST",
            headers: { "X-CSRFToken": token },
            url: '{{ request.path }}',

            data: {
                'refresh': true
            },

            success: function (data) {
                console.log(data)

            }
        });

        window.location.reload(true);

    }
</script>
{% endblock scripts %}



{% block content %}
<div class="row justify-content-center" style="padding: 3rem 0px 3rem 0px;">
    <div class="col-lg-10 col-md-12 col-12">

        <div class="kt-portlet kt-portlet--mobile">
            <div class="kt-portlet__body" style="margin:20px;">

                <div class="row justify-content-center" style="padding-bottom: 30px;">
                    <div class="col-md-12">
                        <h2>Virtual Event</h2>
                        <p>Adjust your virtual event settings here.</p>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 50px;">
                    <div class="col-md-12">
                        <h4>Go To Virtual Event</h4>
                        <p>Click the button to go to the virtual event.</p>
                        <a class="btn btn-info btn-block blinking" href="{{ event.get_live_event_presenter_view }}">Go To Virtual Event</a>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 30px;">
                    <div class="col-md-12">
                        <h4>No ticket access</h4>
                        <p>Allow guests into the virtual event without a ticket.</p>
                        <span class="kt-switch">
                            <label>
                                <input type="checkbox" {% if event.allow_non_ticket_live_viewers %}checked{% else %}{% endif %} name=""
                                    style="user-select: auto;" id="id_age" onchange="ajaxUpdateTicketOption(this);">
                                <span></span>
                            </label>
                        </span>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-md-12">
                        <h4>Presenter Link</h4>
                        <p>The URL event speakers/presenters will use.</p>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 30px;">
                    <div class="col-md-9 col-12" style="padding-bottom: 10px;">
                        <input type="text" class="form-control m-input message" value="www.arqamhouse.com{{ event.get_live_event_presenter_view }}" required=""
                            maxlength="180" id="id_presenter_link" readonly>
                    </div>
                    <div class="col-md-3 col-12">
                        <button class="btn btn-primary btn-block" onclick="copyToClipboard();">
                            Copy</button>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-md-12">
                        <h4>Viewer Link</h4>
                        <p>The URL your guests will use to attend the event.</p>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 30px;">
                    <div class="col-md-9 col-12" style="padding-bottom: 10px;">
                        <input type="text" class="form-control m-input message"
                            value="www.arqamhouse.com{{ event.get_live_view }}" required="" maxlength="180"
                            id="id_viewer_link" readonly>
                    </div>
                    <div class="col-md-3 col-12">
                        <button class="btn btn-primary btn-block" onclick="copyToClipboardViewer();">
                            Copy</button>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 10px;">
                    <div class="col-md-12">
                        <h4>Secret Link</h4>
                        <p>We've generated a secret link you can give whomever you choose. This link will grant anyone access to your live event so please keep it safe.</p>
                        <p>If you feel your link is compromised you can always refresh it below.</p>
                        <button class="btn btn-danger" onclick="ajaxRefreshSecret();">Refresh</button>
                    </div>
                </div>

                <div class="row justify-content-center" style="padding-bottom: 30px;">
                    <div class="col-md-9 col-12" style="padding-bottom: 10px;">
                        <input type="text" class="form-control m-input message" value="www.arqamhouse.com{{ event.get_live_view }}?secret={{ event.secret_live_id }}"
                            required="" maxlength="180" id="id_secret_link" readonly>
                    </div>
                    <div class="col-md-3 col-12">
                        <button class="btn btn-primary btn-block" onclick="copyToClipboardSecret();">
                            Copy</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock content %}