{% extends "backend/base.html" %}

{% load static %}

{% block title %}
Orders | {{ event.title }}
{% endblock title %}

{% block page_title %}
Orders
{% endblock page_title %}

{% block styles %}
<style type="text/css">
	.row-padder {
		padding-top: 15px;
		padding-bottom: 15px;
	}
</style>
{% endblock styles %}


{% block scripts %}
<script src="{% static 'assets/demo/default/custom/components/datatables/base/html-table.js' %}" type="text/javascript"></script>
{% endblock scripts %}


{% block page_crumbs %}
<ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
	<li class="m-nav__item">
		<a href="{{ profile.get_update_url }}" class="m-nav__link">
			<span class="m-nav__link-text">{{ orders.count }} Order{% if orders.count > 1 %}s{% endif %} for "{{ event.title }}"</span>
		</a>
	</li>
</ul>
{% endblock page_crumbs %}

{% block content %}
<div class="m-portlet m-portlet--mobile">
	<div class="m-portlet__body">
		<!--begin: Search Form -->
		<div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
			<div class="row align-items-center">
				<div class="col-xl-6 order-2 order-xl-1">
					<div class="form-group m-form__group row align-items-center">
						<div class="col-md-12">
							<div class="m-input-icon m-input-icon--left">
								<input type="text" class="form-control m-input" placeholder="Search..." id="generalSearch">
								<span class="m-input-icon__icon m-input-icon__icon--left">
									<span><i class="la la-search"></i></span>
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--end: Search Form -->

		<!--begin: Datatable -->
		<table class="m-datatable" id="html_table" width="100%">
			<thead>
			<tr>
				<th class="text-center" title="Number">No.</th>
				<th class="text-center" title="Number">Time Created</th>
				<th class="text-center" title="Number">Status</th>
				<th class="text-center" title="Name">Name</th>
				<th class="text-center" title="Amount">Amount</th>
				<th class="text-center" title="Payment Method">Payment Method</th>
				<th class="text-center" title="Tickets">Tickets</th>
				<th class="text-center" title="View Order">View Order</th>
			</tr>
			</thead>
			<tbody>
				{% for order in orders %}
				<tr class="text-center">
					<td><p class="lead text-center" style="margin:0 auto;">{{ forloop.counter }}</p></td>
					<td><p class="text-center" style="margin:0 auto;">{{ order.created_at }}</p></td>
					<td>{% if order.failed %} <p class="lead text-center" style="color: red;margin:0 auto;">Failed</p> {% else %} <p class="lead text-center" style="color: green;margin:0 auto;">Successful</p>{% endif %}</td>
					<td><p class="text-center" style="margin:0 auto;">{{ order.name }}</p></td>
					<td><p class="lead text-center" style="color: {% if order.failed %}red{% else %}green{% endif %};margin:0 auto;">{% if order.failed %}----{% else %}{% if order.amount > 0 %}${{ order.amount }}{% else %}$0{% endif %}{% endif %}</p></td>
					<td><div class="text-center">{% include "orders/brands.html" with order=order %}</div></td>
					<td><h3 class="text-center" style="color: #7777a7;font-weight: 300;margin:0 auto;">{{ order.attendee_set.all.count }}</h3></td>
					<td><div class="text-center"><a href="{{ order.get_order_view }}" class="btn btn-outline-brand btn-sm btn-block">View Order</a></div></td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<!--end: Datatable -->
		
	</div>		        
</div>

{% endblock content %}














