{% extends "backend/base.html" %}
{% load static %}
{% block title %}
Dashboard | {{ organization.name }}
{% endblock title %}

{% block page_title %}
{{ organization.name }}
{% endblock page_title %}

{% block styles %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js" rel="stylesheet" type="text/css" />
{% endblock styles %}


{% block scripts %}
<script src="{% static 'assets/app/custom/general/crud/metronic-datatable/base/html-table.js' %}" type="text/javascript"></script>

<script type="text/javascript">
	var ctx = document.getElementById("myChart");
	var myChart = new Chart(ctx, {
	    type: 'line',
	    aspectRatio: 2,
	    data: {
	        labels: {{ data_set_dict.day_label|safe }},
	        datasets: [{
	            label: 'Sales $',
	            data: {{ data_set_dict.sales_label|safe }},
	            backgroundColor: 'rgba(68, 153, 216, 0.2)',
	            borderColor:'rgba(68, 153, 216, 1)',
	            borderWidth: 4,
	            lineTension: 0.1,
	            borderCapStyle: 'butt',
	            borderDashOffset: 3.0,
            	borderJoinStyle: 'miter',
            	pointBorderWidth: 6,
            	pointHoverRadius: 5,
            	pointHoverBorderWidth: 2,
            	pointRadius: 0.5,
            	pointHitRadius: 7,
            	xPadding: 25,

	        }]
	    },
	    options: {

	    	legend: {
	            display: false,
	        },

	        animation: {
	            duration: 4000,
	        },

	        maintainAspectRatio: false,

	        scales: {
	            yAxes: [{

	            	gridLines: {
	                    display:false,
	                },

	                ticks: {

	                    beginAtZero: true,
	                    {% if data_set_dict.use_large_scale %}
	                    {% else %}
	                    stepSize : 1,
	                    {% endif %}
	                    suggestedMin: 0,
                    	beginAtZero: true,
	                },

	            }],

	            xAxes: [{

	                gridLines: {
	                    display:false,
	                },

	                stepSize: 5,
	                position: 'bottom',
	            }],

	        },


	        responsive: true,
	    }
	});
</script>
{% endblock scripts %}


{% block page_crumbs %}
<ul class="kt-subheader__breadcrumbs kt-nav kt-nav--inline">
	<li class="kt-nav__item kt-nav__itekt--home">
		
		<a class="kt-nav__link kt-nav__link--icon">
		   <i class="kt-nav__link-icon la la-home"></i>
		</a>
	</li>
	{% if profile.name %}
	<li class="kt-nav__separator">-</li>
	<li class="kt-nav__item">
		<a href="{{ profile.get_update_url }}" class="kt-nav__link">
			<span class="kt-nav__link-text">Welcome {{ profile.name }}</span>
		</a>
	</li>
	{% endif %}
</ul>
{% endblock page_crumbs %}

{% block content %}

{% if not events %}
<div class="row">
	<div class="col-12">
		<div class="kt-portlet kt-portlet--bordered-semi kt-portlet--space kt-portlet--full-height ">
			<div class="kt-portlet__body">

				<div class="row" style="padding-bottom: 10px;">
					<div class="col-12">
						<h3 style="font-weight: 200;color: #a2a2a2;">No upcoming events</h3>
						<br>
						<a href="{% url 'events:create' %}" class="btn btn-info btn-large">Add Event</a>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>
{% endif %}

<div class="row">
	<div class="col-12">
		<div class="kt-portlet kt-portlet--bordered-semi kt-portlet--space kt-portlet--full-height ">
			<div class="kt-portlet__body">
				
				<div class="row">
					<div class="col-12" style="padding-bottom: 10px;">
						<h3 style="font-weight: 200;color: #a2a2a2;">15 Day Overview</h3>
					</div>
				</div>

				<div class="row" style="padding-bottom: 40px;">
					<div class="col-lg-10 col-md-12">
						<canvas id="myChart" width="400" height="200"></canvas>
					</div>
				</div>

				<div class="row" style="padding-bottom: 60px;margin-left: 30px;">
					<div class="col-4">
						<span class="kt-badge kt-badge--info kt-badge--wide" style="font-size: 1.3em;padding: 20px;">Sales: ${{ fifteen_day_sales }}</span>
					</div>
					<div class="col-4">
						<span class="kt-badge kt-badge--info kt-badge--wide" style="font-size: 1.3em;padding: 20px;">Orders: {{ fifteen_days_order_sum }}</span>
					</div>
					<div class="col-4">
						<span class="kt-badge kt-badge--info kt-badge--wide" style="font-size: 1.3em;padding: 20px;">Tickets: {{ fifteen_days_tickets_sum }}</span>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>


{% if attendees %}

<div class="row">
	<div class="col-12">
		<div class="kt-portlet kt-portlet--bordered-semi kt-portlet--space kt-portlet--full-height ">
			<div class="kt-portlet__body">

				<div class="row" style="padding-bottom: 10px;">
					<div class="col-12">
						<h3 style="font-weight: 200;color: #a2a2a2;">Recent Attendees</h3>
					</div>
				</div>

				<div class="row" style="padding-bottom: 30px;">
					<div class="col-lg-10 col-md-12 col-12">
						<!--begin: Datatable -->
						<table class="table kt-table kt-table--head-bg-brand table-responsive table-bordered" id="html_table" width="100%">
							<thead>
							<tr>
								<th title="Number">Time Created</th>
								<th title="Name">Name</th>
								<th  title="Amount">Amount</th>
								<th title="brand">Method</th>
								<th  title="Tickets">Tickets</th>
								<th  title="View Order">View Order</th>
							</tr>
							</thead>
							<tbody>
								{% for attendee in attendees %}
								<tr >
									<td><p  style="margin:0 auto;">{{ attendee.order.created_at }}</p></td>
									<td><p  style="margin:0 auto;">{{ attendee.order.name }}</p></td>
									<td><p  style="margin:0 auto;">${{ attendee.order.amount }}</p></td>
									<td><div >{% include "orders/brands.html" with order=attendee.order %}</div></td>
									<td><h3  style="color: #7777a7;font-weight: 300;margin:0 auto;">{{ attendee.order.attendee_set.all.count }}</h3></td>
									<td><div><a href="{{ attendee.order.get_order_view }}" class="btn btn-outline-brand btn-sm btn-block">View Order</a></div></td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
						<!--end: Datatable -->
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endif %}


{% if events %}
<div class="row" style="padding-bottom: 40px;">
	{% for event in events %}
	<div class="col-lg-5">
	<!--begin::Portlet-->
		<div class="kt-portlet kt-portlet--brand kt-portlet--head-solid-bg kt-portlet--bordered" style="background-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};border-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};">
			<div class="kt-portlet__head" style="background-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};border-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};">
				<div class="kt-portlet__head-caption">
					<div class="kt-portlet__head-title">
						<span class="kt-portlet__head-icon">
							<i class="far fa-calendar-alt"></i>
						</span>
						<h3 class="kt-portlet__head-text" style="font-weight: 400;">
							<a href="{{ event.get_landing_view }}" style="color: #fff;">{{ event.title }}</a>
						</h3>
					</div>			
				</div>
				<div class="kt-portlet__head-tools">
					<ul class="kt-portlet__nav">
						<li class="kt-portlet__nav-item">
							<a href="" class="kt-portlet__nav-link kt-portlet__nav-link--icon">{% if event.public %}<i class="fas fa-lock-open" style="user-select: auto;"></i>{% else %}<i class="fas fa-lock"></i>{% endif %}</a>	
						</li>						
					</ul>
				</div>
			</div>
			<div class="kt-portlet__body">
				<div class="row text-center">
					<div class="col-md-12">
						<p class="lead" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %}">Starts on {{ event.start }}</p>
					</div>
				</div>
				<br>
				<div class="row text-center">
					<div class="col-skt-3 text-center">
						<a href="{{ event.list_tickets_view }}" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %}; text-decoration: none;">
						<i class="flaticon-file" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Tickets</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="{{ event.list_orders_view }}" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-diagram" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Orders</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="{{ event.list_attendees_view }}" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-users" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Attendees</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="{{ event.payout_view }}" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-coins" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Pay-Out</p>
						</a>
					</div>
				</div>
				<br>
				<div class="row text-center">
					<div class="col-skt-3 text-center">
						<a href="{{ event.list_questions_view }}" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-chat" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Questions</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-interface-5" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Confirmation Email</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-placeholder" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Check-Ins</p>
						</a>
					</div>
					<div class="col-skt-3 text-center">
						<a href="" style="color:{% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};text-decoration: none;">
						<i class="flaticon-list-2" style="user-select: auto;font-size: 3em;"></i>
						<p class="">Answers</p>
						</a>
					</div>
				</div>
				<br>
				<a href="" class="btn btn-secondary  btn-block">Edit Content</a>
				<a href="{{ event.get_update_view }}" class="btn btn-primary btn-block" style="background-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};border-color: {% cycle '#4499d5' '#ca6ac3' '#ca6a6a' '#6ac6ca' '#7dca6a' '#caa46a' '#ca6a6a' %};">Edit Event</a>
			</div>
		</div>	
		<!--end::Portlet-->
	</div>
	{% endfor %}
</div>
{% endif %}


{% endblock content %}














